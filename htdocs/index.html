<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Hydra Demo</title>
  
  <script type="text/javascript" src="socket.io.js"></script>
  <script>
      io.setPath('/');
  </script>

  <script type="text/javascript" src="router.js"></script>
  <script type="text/javascript" src="http.js"></script>
  <script type="text/javascript" src="hello.js"></script>

  <script type="text/javascript">
  
    DEBUG = true;
  
    function init() {
    
      websocket = new io.Socket('localhost');
      websocket.connect();

      http = new Http(websocket);
      
      // Sets up a client side "server".  On the server, try:
      //
      //   $ export CLIENTID="client611851c0"
      //   $ export http_proxy="http://127.0.0.1:8081/"
      //   $ curl -s -i -X GET "http://$CLIENTID/"
      //   $ curl -s -i -d 'Michael' -X PUT "http://$CLIENTID/"
      //   $ curl -s -i -X GET "http://$CLIENTID/"

      var hello = new Hello("Clem");
      http.createServer(hello.adapter());
      
      // Makes a server-side HTTP request

      http.createClient('GET', 'http://localhost:8080/hello.txt', function(res) { console.log(res.body); });
      http.createClient('GET', 'http://localhost:8080/hello.txt', function(res) { console.log(res.body); });
      http.createClient('GET', 'http://localhost:8080/hello.txt', function(res) { console.log(res.body); });

    }
    
  </script>
</head>

<body onload="init();">
    <p>Nothing much to see here&#8212view source and open Firebug!</p>
</body>

</html>
